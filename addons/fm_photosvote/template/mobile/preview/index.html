<!doctype html><html ng-app="myApp"><head><meta charset="utf-8"><title>{$share['title']}</title><meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport"><meta name="format-detection" content="telephone=no" /><script>var require = {urlArgs: 'v={php echo date('YmdHis');}'};</script>{php echo register_jssdk()}<script language="javascript" src="{FM_STATIC_PLUGIN}designer/js/dist/jquery-1.11.1.min.js"></script><script language="javascript" src="{FM_STATIC_PLUGIN}designer/js/dist/jquery.gcjs.js"></script><link href="../addons/fm_photosvote/static/css/font-awesome.min.css" rel="stylesheet"><link href="{FM_STATIC_PLUGIN}designer/imgsrc/designer.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="{FM_STATIC_MOBILE}public/css/style.css"><link rel="stylesheet" type="text/css" href="{FM_STATIC_PLUGIN}designer/css/style.css"><link rel="stylesheet" type="text/css" href="{FM_STATIC_PLUGIN}designer/css/bootstrap.min.css"><script type="text/javascript" src="{FM_STATIC_MOBILE}public/photos/js/main.js?ver=1.0"></script>    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script><style>    body {margin:0px; background:#f9f9f9; }    .fe-mod:hover{border:2px dashed rgba(0,0,0,0); cursor:default;}    .fe-mod,.fe-mod:hover {border:0px;}    .fe-mod-cube td {height:auto;}</style><script type="text/javascript">    function _removeHTMLTag(str) {        if(typeof str == 'string'){            str = str.replace(/<script[^>]*?>[\s\S]*?<\/script>/g,'');            str = str.replace(/<style[^>]*?>[\s\S]*?<\/style>/g,'');            str = str.replace(/<\/?[^>]*>/g,'');            str = str.replace(/\s+/g,'');            str = str.replace(/&nbsp;/ig,'');        }        return str;    }</script></head><body >    <div ng-controller="MainCtrl">        <!-- 浮动按钮 -->        <div class="fe-floatico" style="position: fixed;" ng-style="{'width':pages[0].params.floatwidth,'top':pages[0].params.floattop}" ng-class="{'fe-floatico-right':pages[0].params.floatstyle=='right'}" ng-show="pages[0].params.floatico==1">            <a href="{{pages[0].params.floathref || 'javascript:;'}}">                <img ng-src="{{pages[0].params.floatimg || '{FM_STATIC_PLUGIN}designer/imgsrc/init-data/init-image-7.png'}}" style="width:100%;" />            </a>        </div>        <!-- 关注按钮 -->        {if $guide['followed']!=1}            <div style="height: 50px;" ng-show="pages[0].params.guide==1"></div>            <a href="{$guide['shareurl']}">                <div class="fe-guide" style="position: fixed;" ng-style="{'display':'block','background-color':pages[0].params.guidebgcolor,'opacity':pages[0].params.guideopacity}" ng-show="pages[0].params.guide==1">                    <div class="fe-guide-faceimg" ng-style="{'border-radius':pages[0].params.guidefacestyle}">                        <img src="{$guide['logo']}" ng-style="{'border-radius':pages[0].params.guidefacestyle}" />                    </div>                    <div class="fe-guide-sub" ng-style="{'color':pages[0].params.guidenavcolor,'background-color':pages[0].params.guidenavbgcolor}">{{pages[0].params.guidesub ||'立即关注'}}</div>                    <div class="fe-guide-text"  ng-style="{'font-size':pages[0].params.guidesize,'color':pages[0].params.guidecolor}">                        <p {if empty($guide['title2'])} style="line-height:40px;"{/if}>{$guide['title1']}</p>                        <p {if empty($guide['title1'])} style="line-height:40px;"{/if}>{$guide['title2']}</p>                    </div>                </div>            </a>        {/if}        <div ng-repeat="Item in Items" class="fe-mod-repeat">            <div ng-include="'../addons/fm_photosvote/template/addons/designer/temp/show-'+Item.temp+'.html'" class="fe-mod-parent" id="{{Item.id}}" mid="{{Item.id}}" on-finish-render-filters></div>        </div>        <div ng-show="Items==''" style="line-height: 300px; text-align: center; font-size: 14px; color: #999;">            <div id="core_loading" style="top:50%;left:50%;margin-left:-35px;margin-top:-50%;position:absolute;width:80px;height:60px;"><img src="{FM_STATIC_PLUGIN}designer/images/loading.svg" width="80" /></div>        </div>        <div class="fe-mod fe-mod-8" ng-show="pages[0].params.cansaizhe == 1" ng-style="{'background-color':pages[0].params.votebgcolor}">            <div class="fe-mod-8-title"  ng-style="{'color':pages[0].params.votetitlecolor,'background-color':pages[0].params.votebgcolor}">{{pages[0].params.votetitle|| '请填写投票区标题'}}</div>             <style type="text/css">                #images{ margin: 10px -5px 0;}                #images .items{ float: left; width: 49.99%; padding:0 5px 10px; box-sizing:border-box; font-size: 1.1rem;}                #images .items img{ display: block; width: 100%;}                #images .items .bg{ display: block; padding: 5px; background: #fff; border: 2px solid #c8ab81; box-sizing:border-box;}                #images .items p{ line-height: 2.4rem}                #images .items p .name{ float: right;}                #images .items .sort{ background: #7F355E; color: #fff2d3; border-radius: 5px; padding:.3rem .4rem; overflow: hidden;}                #images .items .vote{ float: right; font-size: 1.2rem; color: #ffb; border-radius: 5px; padding: 0 .2rem; line-height: 2.4rem;                                        background: {{pages[0].params.votesmanbgcolor}} url('{{pages[0].params.voteanimg}}'); }                #images .items .piao{ font-size: 1.8rem; line-height: 2.4rem;}                .masonryload{ font-size: 1.2rem; text-align: center; }                #images .items .sort .piao a {font-size:0.7em;}/**投票按钮背景色**/            </style>            <div class="tab" id="tab">                <div class="tab_bd">                    <div id="images" ng-style="{'color':pages[0].params.titlecolor,'background-color':pages[0].params.votealluserbgcolor}">                        <div class="items">                            <div class="bg" ng-style="{'background':pages[0].params.votealluserbgcolor, 'border-color':pages[0].params.votealluserbgcolor}">                                <a href="">                                    <img src="{FM_STATIC_MOBILE}public/images/pimages.jpg">                                </a>                                <p><span class="name" ng-style="{'color':pages[0].params.voteusernamecolor}">姓名</span><span class="num" ng-style="{'color':pages[0].params.voteusernamecolor}">编号</span></p>                                <div class="sort" ng-style="{'background':pages[0].params.voteanbgcolor}"><span class="vote btn btn-danger" ng-style="{'color':pages[0].params.voteancolor,'border-color':pages[0].params.votesmanbgcolor}">{{pages[0].params.voteanname|| '投Ta一票'}}</span>                                    <span id="photosnumfromUser" class="piao" ng-style="{'color':pages[0].params.votepiaoshucolor}">99<a ng-style="{'color':pages[0].params.votepiaoshucolor}">票</a></span>                                </div>                            </div>                        </div>                        </div>                    <p class='masonryload' ng-style="{'color':pages[0].params.voteusernamecolor,'background-color':pages[0].params.votealluserbgcolor}">请在实际中预览</p>                </div>            </div>         </div>    </div>    <script type="text/javascript" src="{FM_STATIC_PLUGIN}designer/imgsrc/angular.min.js"></script>{php $_W['angular_loaded']=true}<script type="text/javascript" src="{FM_STATIC_PLUGIN}designer/imgsrc/hhSwipe.js"></script><script type="text/javascript">    function initswipe(jobj){        var bullets = jobj.next().get(0).getElementsByTagName('a');        var banner = Swipe(jobj.get(0), {            auto: 4000,            continuous: true,            disableScroll:false,            callback: function(pos) {                var i = bullets.length;                while (i--) {                    $(bullets[i]).css("opacity",0.4);                }                $(bullets[pos]).css("opacity",0.6);            }        })    }    var app = angular.module('myApp', []);    app.controller('MainCtrl', ['$scope', function($scope){            $scope.shop = {                uniacid:'{$_W["uniacid"]}'            };            $scope.cols = [0,1,2,3];            $scope.size = $(document.body).width()/4;            $scope.pages = [{$pageinfo}];            $scope.system = [{$system}];            $scope.Items = [{$data}];            $scope.show = '1';                        $scope.hasCube = function(Item){                              var has = false;                 var row=0,col = 0;                 for(var i=row;i<4;i++){                    for(var j=col;j<4;j++){                      if (Item.params.layout[i][j] && !Item.params.layout[i][j].isempty) {                          has = true;                          break;                      }                    }                }                return has;                            }                        $scope.$on('ngRepeatFinished',function(){                $('.fe-mod-2 .swipe').each(function(){                        initswipe($(this));                 });                 $('.fe-mod-8-main-img img').each(function(){                     $(this).height($(this).width());                     });                 $('.fe-mod-12 img').each(function(){                     $(this).height($(this).width());                     });                 $('.fe-mod-cube table  tr').each(function(){                    if( $(this).children().length<=0){                        $(this).html('<td></td>');                    }                 });           $('#desginer-nav').show();           $('#footer-nav').show();           $('#systemcopyright').show();            });                        }]);        app.directive('stringHtml' , function(){        return function(scope , el , attr){            if(attr.stringHtml){                scope.$watch(attr.stringHtml , function(html){                    el.html(html || '');                });            }        };    });      app.directive("onFinishRenderFilters",function($timeout){        return{            restrict: 'A',            link: function(scope,element,attr){                if(scope.$last === true){                    $timeout(function(){                        scope.$emit('ngRepeatFinished');                    });                }            }        };    });</script>{template 'tvote'}{php $show_copyright =true}{if $footertype==1}    {php $show_footer=true;$footer_current ='first'}    {template 'fnav'}{else if $footertype==2}    {php $show_footer=false;}    {template 'preview/menu'}{else}    {template 'fnav'}{/if}{template 'footer'}