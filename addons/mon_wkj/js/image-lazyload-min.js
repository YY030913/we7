var ImageLazyload=(function(g,h){var l=0;var d=[];var e={offset:0,container:g(".listx"),callback:null};var a=function(t){t=g(t);var s=e.offset?0:60;var A={};try{A=t.offset()}catch(F){A={left:0,top:0}}var o=g(window).scrollTop();var x=g(window).scrollLeft();var E=g(window).width();var v=g(window).height();var m=t[0].offsetHeight==1?t.parent()[0].offsetHeight:t[0].offsetHeight;var z=t[0].offsetWidth==1?t.parent()[0].offsetWidth:t[0].offsetWidth;var D,C,B,y,r,q,p,n,u,w,G,H;D=y=A.left;r=q=A.top;C=B=A.left+z;p=n=A.top+m;u=x-s;G=o-s;w=x+E+s;H=o+v+s;return(u<=D&&D<=w&&G<=r&&r<=H)||(u<=C&&C<=w&&G<=q&&q<=H)||(u<=B&&B<=w&&G<=p&&p<=H)||(u<=y&&y<=w&&G<=n&&n<=H)};var c=function(m){return(m.attr("data-loaded")=="1")};var i=function(n){n=g(n);if(c(n)){return}if(n.attr("data-loadfunc")!="1"){n.attr("data-loadfunc",1);n.ready(function(o){var p=g(this);p.attr("data-loaded",1);if(e.callback&&typeof e.callback==="function"){e.callback(n)}})}var m=n.attr("data-src")||"";if(m.indexOf("http")>-1){n.attr("src",m);n[0].removeAttribute("data-src")}};var b=function(){g.each(d,function(n,o){o=g(o);if(!c(o)&&a(o)){i(o)}});var m=[];g.each(d,function(n,o){o=g(o);if(!c(o)){m.push(o)}});d=m};var k=function(){var o=g(e.container);var m=false;if(o.is(document.body)){m=true}var n=[];g.each(g("img[data-src]",o),function(p,q){q=g(q);if(!c(q)){n.push(q)}});if(m){d=n}else{d=d.concat(n)}b()};var f=function(){g.each(["resize","scroll","ready"],function(m,n){g(".listx").bind(n,function(o){if(l){window.clearTimeout(l)}l=window.setTimeout(function(){l=0;k()},20);o.stopPropagation()})})};var j=function(m){e=g.extend(e,m);k();f()};return{init:j,visible:a,load:i}})(jQuery);ImageLazyload.init();